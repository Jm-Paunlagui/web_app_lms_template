/*!
 * chartjs-plugin-datalabels v0.7.0
 * https://chartjs-plugin-datalabels.netlify.com
 * (c) 2019 Chart.js Contributors
 * Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):(t=t||self).ChartDataLabels=e(t.Chart)}(this,function(h){"use strict";var n=(h=h&&h.hasOwnProperty("default")?h.default:h).helpers,e=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),c={toTextLines:function(t){var e,r=[];for(t=[].concat(t);t.length;)"string"==typeof(e=t.pop())?r.unshift.apply(r,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):n.isNullOrUndef(t)||r.unshift(""+e);return r},toFontString:function(t){return!t||n.isNullOrUndef(t.size)||n.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,r){var n,i=[].concat(e),o=i.length,e=t.font,a=0;for(t.font=r.string,n=0;n<o;++n)a=Math.max(t.measureText(i[n]).width,a);return t.font=e,{height:o*r.lineHeight,width:a}},parseFont:function(t){var e=h.defaults.global,r=n.valueOrDefault(t.size,e.defaultFontSize),t={family:n.valueOrDefault(t.family,e.defaultFontFamily),lineHeight:n.options.toLineHeight(t.lineHeight,r),size:r,style:n.valueOrDefault(t.style,e.defaultFontStyle),weight:n.valueOrDefault(t.weight,null),string:""};return t.string=c.toFontString(t),t},bound:function(t,e,r){return Math.max(t,Math.min(e,r))},arrayDiff:function(t,e){for(var r,n,i=t.slice(),o=[],a=0,l=e.length;a<l;++a)n=e[a],-1===(r=i.indexOf(n))?o.push([n,1]):i.splice(r,1);for(a=0,l=i.length;a<l;++a)o.push([i[a],-1]);return o},rasterize:function(t){return Math.round(t*e)/e}};function l(t,e){var r=e.x,e=e.y;if(null===r)return{x:0,y:-1};if(null===e)return{x:1,y:0};r=t.x-r,t=t.y-e,e=Math.sqrt(r*r+t*t);return{x:e?r/e:0,y:e?t/e:-1}}var i=0,f=1,x=2,y=4,v=8;function _(t,e,r){var n=i;return t<r.left?n|=f:t>r.right&&(n|=x),e<r.top?n|=v:e>r.bottom&&(n|=y),n}function s(t,e){var r,n=e.anchor,i=t;return e.clamp&&(i=function(t,e){for(var r,n,i,o=t.x0,a=t.y0,l=t.x1,s=t.y1,u=_(o,a,e),d=_(l,s,e);u|d&&!(u&d);)(r=u||d)&v?(n=o+(l-o)*(e.top-a)/(s-a),i=e.top):r&y?(n=o+(l-o)*(e.bottom-a)/(s-a),i=e.bottom):r&x?(i=a+(s-a)*(e.right-o)/(l-o),n=e.right):r&f&&(i=a+(s-a)*(e.left-o)/(l-o),n=e.left),r===u?u=_(o=n,a=i,e):d=_(l=n,s=i,e);return{x0:o,x1:l,y0:a,y1:s}}(i,e.area)),i="start"===n?(r=i.x0,i.y0):"end"===n?(r=i.x1,i.y1):(r=(i.x0+i.x1)/2,(i.y0+i.y1)/2),function(t,e,r,n,i){switch(i){case"center":r=n=0;break;case"bottom":r=0,n=1;break;case"right":r=1,n=0;break;case"left":r=-1,n=0;break;case"top":r=0,n=-1;break;case"start":r=-r,n=-n;break;case"end":break;default:i*=Math.PI/180,r=Math.cos(i),n=Math.sin(i)}return{x:t,y:e,vx:r,vy:n}}(r,i,t.vx,t.vy,e.align)}var u=function(t,e){var r=(t.startAngle+t.endAngle)/2,n=Math.cos(r),i=Math.sin(r),o=t.innerRadius,r=t.outerRadius;return s({x0:t.x+n*o,y0:t.y+i*o,x1:t.x+n*r,y1:t.y+i*r,vx:n,vy:i},e)},d=function(t,e){var r=l(t,e.origin),n=r.x*t.radius,i=r.y*t.radius;return s({x0:t.x-n,y0:t.y-i,x1:t.x+n,y1:t.y+i,vx:r.x,vy:r.y},e)},b=function(t,e){var r=l(t,e.origin),n=t.x,i=t.y,o=0,a=0;return t.horizontal?(n=Math.min(t.x,t.base),o=Math.abs(t.base-t.x)):(i=Math.min(t.y,t.base),a=Math.abs(t.base-t.y)),s({x0:n,y0:i+a,x1:n+o,y1:i,vx:r.x,vy:r.y},e)},p=function(t,e){var r=l(t,e.origin);return s({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:r.x,vy:r.y},e)},g=h.helpers,C=c.rasterize;function m(t,e,r,n){var i,o,a,l,s,u,d,f,h,c,x,y,v,_,b=n.textAlign,p=n.color,g=!!p,m=n.font,w=e.length,k=n.textStrokeColor,M=n.textStrokeWidth,S=k&&M;if(w&&(g||S))for(o=r,a=b,s=(l=m).lineHeight,u=o.w,l=o.x,"center"===a?l+=u/2:"end"!==a&&"right"!==a||(l+=u),r={h:s,w:u,x:l,y:o.y+s/2},t.font=m.string,t.textAlign=b,t.textBaseline="middle",t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,g&&(t.fillStyle=p),S&&(t.lineJoin="round",t.lineWidth=M,t.strokeStyle=k),i=0,w=e.length;i<w;++i)d=t,f=e[i],h={stroked:S,filled:g,w:r.w,x:r.x,y:r.y+r.h*i},_=v=y=x=c=void 0,c=d.shadowBlur,x=h.stroked,y=C(h.x),v=C(h.y),_=C(h.w),x&&d.strokeText(f,y,v,_),h.filled&&(c&&x&&(d.shadowBlur=0),d.fillText(f,y,v,_),c&&x&&(d.shadowBlur=c))}function w(t,e,r,n){var i=this;i._config=t,i._index=n,i._model=null,i._rects=null,i._ctx=e,i._el=r}g.extend(w.prototype,{_modelize:function(t,e,r,n){var i,o=this._index,a=g.options.resolve,l=c.parseFont(a([r.font,{}],n,o)),s=a([r.color,h.defaults.global.defaultFontColor],n,o);return{align:a([r.align,"center"],n,o),anchor:a([r.anchor,"center"],n,o),area:n.chart.chartArea,backgroundColor:a([r.backgroundColor,null],n,o),borderColor:a([r.borderColor,null],n,o),borderRadius:a([r.borderRadius,0],n,o),borderWidth:a([r.borderWidth,0],n,o),clamp:a([r.clamp,!1],n,o),clip:a([r.clip,!1],n,o),color:s,display:t,font:l,lines:e,offset:a([r.offset,0],n,o),opacity:a([r.opacity,1],n,o),origin:(i=this._el,t=i._model.horizontal,(i=i._scale||t&&i._xScale||i._yScale)?void 0!==i.xCenter&&void 0!==i.yCenter?{x:i.xCenter,y:i.yCenter}:(i=i.getBasePixel(),t?{x:i,y:null}:{x:null,y:i}):null),padding:g.options.toPadding(a([r.padding,0],n,o)),positioner:(i=this._el)instanceof h.elements.Arc?u:i instanceof h.elements.Point?d:i instanceof h.elements.Rectangle?b:p,rotation:a([r.rotation,0],n,o)*(Math.PI/180),size:c.textSize(this._ctx,e,l),textAlign:a([r.textAlign,"start"],n,o),textShadowBlur:a([r.textShadowBlur,0],n,o),textShadowColor:a([r.textShadowColor,s],n,o),textStrokeColor:a([r.textStrokeColor,s],n,o),textStrokeWidth:a([r.textStrokeWidth,0],n,o)}},update:function(t){var e,r,n=this,i=null,o=null,a=n._index,l=n._config,s=g.options.resolve([l.display,!0],t,a);s&&(e=t.dataset.data[a],r=g.valueOrDefault(g.callback(l.formatter,[e,t]),e),(a=g.isNullOrUndef(r)?[]:c.toTextLines(r)).length&&(i=n._modelize(s,a,l,t),r=(e=i).borderWidth||0,s=e.padding,a=e.size.height,l=e.size.width,e=-a/2,o={frame:{x:(t=-l/2)-s.left-r,y:e-s.top-r,w:l+s.width+2*r,h:a+s.height+2*r},text:{x:t,y:e,w:l,h:a}})),n._model=i,n._rects=o},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var r,n,i,o,a=t.ctx,l=this._model,s=this._rects;this.visible()&&(a.save(),l.clip&&(o=l.area,a.beginPath(),a.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),a.clip()),a.globalAlpha=c.bound(0,l.opacity,1),a.translate(C(e.x),C(e.y)),a.rotate(l.rotation),r=a,n=s.frame,t=(i=l).backgroundColor,o=i.borderColor,e=i.borderWidth,(t||o&&e)&&(r.beginPath(),g.canvas.roundedRect(r,C(n.x)+e/2,C(n.y)+e/2,C(n.w)-e,C(n.h)-e,i.borderRadius),r.closePath(),t&&(r.fillStyle=t,r.fill()),o&&e&&(r.strokeStyle=o,r.lineWidth=e,r.lineJoin="miter",r.stroke())),m(a,l.lines,s.text,l),a.restore())}});var t=h.helpers,k=Number.MIN_SAFE_INTEGER||-9007199254740991,M=Number.MAX_SAFE_INTEGER||9007199254740991;function o(t,e,r){var n=Math.cos(r),i=Math.sin(r),r=e.x,e=e.y;return{x:r+n*(t.x-r)-i*(t.y-e),y:e+i*(t.x-r)+n*(t.y-e)}}function S(t,e){for(var r,n,i=M,o=k,a=e.origin,l=0;l<t.length;++l)r=(n=t[l]).x-a.x,n=n.y-a.y,n=e.vx*r+e.vy*n,i=Math.min(i,n),o=Math.max(o,n);return{min:i,max:o}}function z(t,e){var r=e.x-t.x,n=e.y-t.y,n=Math.sqrt(r*r+n*n);return{vx:(e.x-t.x)/n,vy:(e.y-t.y)/n,origin:t,ln:n}}function $(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}}function O(t,e,r){var n=e.positioner(t,e),i=n.vx,o=n.vy;if(!i&&!o)return{x:n.x,y:n.y};var a=r.w,l=r.h,t=e.rotation,r=Math.abs(a/2*Math.cos(t))+Math.abs(l/2*Math.sin(t)),l=Math.abs(a/2*Math.sin(t))+Math.abs(l/2*Math.cos(t)),t=1/Math.max(Math.abs(i),Math.abs(o));return r*=i*t,l*=o*t,r+=e.offset*i,l+=e.offset*o,{x:n.x+r,y:n.y+l}}function A(t){for(var e,r,n,i,o=0,a=t.length;o<a;++o)(r=(e=t[o]).$layout)._visible&&(n=e.geometry(),i=O(e._el._model,e.model(),n),r._box.update(i,n,e.rotation()));return function(t,e){for(var r,n,i,o=t.length-1;0<=o;--o)for(n=t[o].$layout,r=o-1;0<=r&&n._visible;--r)(i=t[r].$layout)._visible&&n._box.intersects(i._box)&&e(n,i);return t}(t,function(t,e){var r=t._hidable,n=e._hidable;r&&n||n?e._visible=!1:r&&(t._visible=!1)})}t.extend($.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,r){this._rotation=r,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=o(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,r,n,i=this._points(),o=t._points(),a=[z(i[0],i[1]),z(i[0],i[3])];for(this._rotation!==t._rotation&&a.push(z(o[0],o[1]),z(o[0],o[3])),e=0;e<a.length;++e)if(r=S(i,a[e]),n=S(o,a[e]),r.max<n.min||n.max<r.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,r=this.center();return[o({x:t.x,y:t.y},r,e),o({x:t.x+t.w,y:t.y},r,e),o({x:t.x+t.w,y:t.y+t.h},r,e),o({x:t.x,y:t.y+t.h},r,e)]}});var D={prepare:function(t){for(var e,r,n,i=[],o=0,a=t.length;o<a;++o)for(e=0,r=t[o].length;e<r;++e)n=t[o][e],i.push(n),n.$layout={_box:new $,_hidable:!1,_visible:!0,_set:o,_idx:e};return i.sort(function(t,e){t=t.$layout,e=e.$layout;return t._idx===e._idx?e._set-t._set:e._idx-t._idx}),this.update(i),i},update:function(t){for(var e,r,n,i=!1,o=0,a=t.length;o<a;++o)r=(e=t[o]).model(),(n=e.$layout)._hidable=r&&"auto"===r.display,n._visible=e.visible(),i|=n._hidable;i&&A(t)},lookup:function(t,e){for(var r,n=t.length-1;0<=n;--n)if((r=t[n].$layout)&&r._visible&&r._box.contains(e))return t[n];return null},draw:function(t,e){for(var r,n,i,o,a=0,l=e.length;a<l;++a)(n=(r=e[a]).$layout)._visible&&(i=r.geometry(),o=O(r._el._view,r.model(),i),n._box.update(o,i,r.rotation()),r.draw(t,o))}},a=h.helpers,t={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(a.isNullOrUndef(t))return null;var e,r,n,i=t;if(a.isObject(t))if(a.isNullOrUndef(t.label))if(a.isNullOrUndef(t.r))for(i="",n=0,r=(e=Object.keys(t)).length;n<r;++n)i+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else i=t.r;else i=t.label;return""+i},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},P=h.helpers,N="$datalabels",R="$default";function F(t,e,r){var n,i,o;e&&(n=r.$context,e[(i=r.$groups)._set]&&(o=e[i._set][i._key])&&!0===P.callback(o,[n])&&(t[N]._dirty=!0,r.update(n)))}function W(t,e){var r=t[N],n=r._listeners;if(n.enter||n.leave){if("mousemove"===e.type)i=D.lookup(r._labels,e);else if("mouseout"!==e.type)return;var i,o,a,e=r._hovered;r._hovered=i,t=t,n=n,i=i,((e=e)||i)&&(e?i?e!==i&&(a=o=!0):a=!0:o=!0,a&&F(t,n.leave,e),o&&F(t,n.enter,i))}}h.defaults.global.plugins.datalabels=t;t={id:"datalabels",beforeInit:function(t){t[N]={_actives:[]}},beforeUpdate:function(t){t=t[N];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(t,n,e){var r,i,o,a,l,s,u,d,f,h,c,x=n.index,y=t[N],v=y._datasets[x]=[],_=t.isDatasetVisible(x),b=t.data.datasets[x],p=(i=e,e=(r=b).datalabels,r={},!(a=[])===e?null:(!0===e&&(e={}),i=P.merge({},[i,e]),o=i.labels||{},e=Object.keys(o),delete i.labels,e.length?e.forEach(function(t){o[t]&&a.push(P.merge({},[i,o[t],{_key:t}]))}):a.push(i),r=a.reduce(function(r,n){return P.each(n.listeners||{},function(t,e){r[e]=r[e]||{},r[e][n._key||R]=t}),delete n.listeners,r},{}),{labels:a,listeners:r})),g=n.meta.data||[],m=t.ctx;for(m.save(),l=0,u=g.length;l<u;++l)if((h=g[l])[N]=[],_&&h&&!h.hidden&&!h._model.skip)for(s=0,d=p.labels.length;s<d;++s)f=(c=p.labels[s])._key,(c=new w(c,m,h,l)).$groups={_set:x,_key:f||R},c.$context={active:!1,chart:t,dataIndex:l,dataset:b,datasetIndex:x},c.update(c.$context),h[N].push(c),v.push(c);m.restore(),P.merge(y._listeners,p.listeners,{merger:function(t,e,r){e[t]=e[t]||{},e[t][n.index]=r[t],y._listened=!0}})},afterUpdate:function(t,e){t[N]._labels=D.prepare(t[N]._datasets,e)},afterDatasetsDraw:function(t){D.draw(t,t[N]._labels)},beforeEvent:function(t,e){if(t[N]._listened)switch(e.type){case"mousemove":case"mouseout":W(t,e);break;case"click":n=e,i=(r=t)[N],o=i._listeners.click,(n=o&&D.lookup(i._labels,n))&&F(r,o,n)}var r,n,i,o},afterEvent:function(t){for(var e,r,n,i,o,a=t[N],l=a._actives,s=a._actives=t.lastActive||[],u=c.arrayDiff(l,s),d=0,f=u.length;d<f;++d)if((n=u[d])[1])for(r=(o=n[e=0][N]||[]).length;e<r;++e)(i=o[e]).$context.active=1===n[1],i.update(i.$context);(a._dirty||u.length)&&(D.update(a._labels),function(t){if(!t.animating){for(var e=h.animationService.animations,r=0,n=e.length;r<n;++r)if(e[r].chart===t)return;t.render({duration:1,lazy:!0})}}(t)),delete a._dirty}};return h.plugins.register(t),t});